{% extends 'layout.html' %}

{% block body %}
    
    <h1>About The PyBank App</h1>
    <hr>
     <h2><p>In this Challenge, you are tasked with creating a Python script to analyze the financial records of your company. You will be given a financial dataset called budget_data.csv. The dataset is composed of two columns: "Date" and "Profit/Losses".</p>

      <p>Your task is to create a Python script that analyzes the records to calculate each of the following values:</p>
      
      <li>The total number of months included in the dataset</li>
      
      <li>The net total amount of "Profit/Losses" over the entire period</li>
      
      <li>The changes in "Profit/Losses" over the entire period, and then the average of those changes</li>
      
      <li>The greatest increase in profits (date and amount) over the entire period</li>
      
      <li>The greatest decrease in profits (date and amount) over the entire period</li></h2>
      
      <p><img style="max-width: 75%; height: auto;" src="{{url_for('static', filename='revenue-per-lead.png')}}"/></p>
      
      <script>
        function ilonaKep() {
          var frame = document.querySelector('.frame');
          var ilona = document.createElement("IMG");
          ilona.src = "./static/revenue-per-lead.png";
          ilona.width = "300";
          frame.appendChild(ilona);
        }
    
        ilonaKep()
      </script>
    <p class="lead">
         </p>

         <p><button class="btn btn-primary btn-lg" onclick=showAlert() href="/pybank" role="button">Run PyBank App</button>
          <button class="btn btn-primary btn-lg" onclick=showAlert2() href="/pypoll" role="button">Run PyPoll App</button>
          <a class="btn btn-primary btn-lg" href="/contact" role="button">Contact</a>    
    <br>
    </p> 
    
    <script>
      function showAlert() {
        Swal.fire({
          title: 'Success!',
          text: 'Your data has been submitted successfully.',
          icon: 'success',
          confirmButtonText: 'Cool'
        }).then((result) => {
          if (result.isConfirmed) {
            // Redirect after confirmation
            window.location.href = "/pybank";
          }
        });
      } 
      </script>
    
    <script>
    function showAlert2() {
      Swal.fire({
        title: 'Success!',
        text: 'Your data has been submitted successfully.',
        icon: 'success',
        confirmButtonText: 'Cool'
      }).then((result) => {
        if (result.isConfirmed) {
          // Redirect after confirmation
          window.location.href = "/pypoll";
        }
      });
    }
    </script>


    <h2>PyBank Financial Analysis</h2>
    ---------------------------------------

    </div>
    <h2>
        Total Months: {{ data['total_months'] }}
      </h2>
        <h2>
          Total: ${{ data['total_profit_loss'] }}
          </h2>
          <h2>
            Average Change: ${{ data['average_change'] }}
            </h2>
            <h2>
                Greatest Increase in Profits: {{ data['max_increase_date'] }} (${{ data['max_increase'] }}) 
                </h2>
                <h2>
                  Greatest Decrease in Profits: {{ data['min_decrease_date'] }} (${{ data['min_decrease'] }}) 
                    </h2>
  <hr>                  
{% endblock %}
